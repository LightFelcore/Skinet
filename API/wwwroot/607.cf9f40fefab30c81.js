"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[607],{7894:(S,m,s)=>{s.r(m),s.d(m,{OrdersModule:()=>a});var n=s(6895),p=s(5825),t=s(1571),h=s(9646),g=s(4004),f=s(2340),O=s(529);class i{constructor(r){this.http=r,this.baseUrl=f.N.apiUrl,this.orders=[]}getOrdersForUser(){return this.orders.length>0?(0,h.of)(this.orders):this.http.get(this.baseUrl+"/orders").pipe((0,g.U)(r=>(this.orders=r,r)))}getOrderDetailed(r){let e=this.orders.find(u=>u.id===r);return e?(0,h.of)(e):this.http.get(this.baseUrl+"/orders/"+r)}}function v(o,r){if(1&o&&(t.TgZ(0,"tr",8)(1,"td",9),t._uU(2),t.qZA(),t.TgZ(3,"td",9),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td",9),t._uU(7),t.ALo(8,"currency"),t.qZA(),t.TgZ(9,"td",9),t._uU(10),t.qZA()()),2&o){const e=r.$implicit;t.MGl("routerLink","/orders/",e.id,""),t.xp6(2),t.hij("# ",e.id,""),t.xp6(2),t.Oqu(t.xi3(5,5,e.orderDate,"medium")),t.xp6(3),t.Oqu(t.lcZ(8,8,e.total)),t.xp6(3),t.Oqu(e.status)}}function Z(o,r){if(1&o&&(t.ynx(0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"table",4)(5,"thead",5)(6,"tr")(7,"th",6),t._uU(8,"Order"),t.qZA(),t.TgZ(9,"th",6),t._uU(10,"Date"),t.qZA(),t.TgZ(11,"th",6),t._uU(12,"Total"),t.qZA(),t.TgZ(13,"th",6),t._uU(14,"Status"),t.qZA()()(),t.TgZ(15,"tbody"),t.YNc(16,v,11,10,"tr",7),t.qZA()()()()(),t.BQk()),2&o){const e=t.oxw();t.xp6(16),t.Q6J("ngForOf",e.orders)}}i.\u0275fac=function(r){return new(r||i)(t.LFG(O.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"});class c{constructor(r){this.ordersService=r}ngOnInit(){this.getOrders()}getOrders(){this.ordersService.getOrdersForUser().subscribe({next:r=>{this.orders=r,this.orders.map(e=>{e.total=e.subtotal+e.shippingPrice})},error:r=>console.log(r)})}}c.\u0275fac=function(r){return new(r||c)(t.Y36(i))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-orders"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"container","mt-5"],[1,"row"],[1,"col-12"],[1,"table","table-hover",2,"cursor","pointer"],[1,"thead-light"],[2,"padding","1.20em"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"],[2,"padding","1em"]],template:function(r,e){1&r&&t.YNc(0,Z,17,1,"ng-container",0),2&r&&t.Q6J("ngIf",e.orders)},dependencies:[n.sg,n.O5,p.rH,n.H9,n.uU]});var x=s(8909),T=s(9281),U=s(3449);function A(o,r){if(1&o&&(t.TgZ(0,"div",2)(1,"div",3),t._UZ(2,"app-basket-summary",4),t.qZA(),t.TgZ(3,"div",5),t._UZ(4,"app-order-totals",6),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("items",e.order.orderItems)("isBasket",!1)("isOrder",!0),t.xp6(2),t.Q6J("shippingPrice",e.order.shippingPrice)("subtotal",e.order.subtotal)("total",e.order.total)}}class l{constructor(r,e,u){this.route=r,this.bcService=e,this.ordersService=u,this.bcService.set("@OrderDetailed"," ")}ngOnInit(){this.ordersService.getOrderDetailed(+this.route.snapshot.paramMap.get("id")).subscribe({next:r=>{this.order=r,this.bcService.set("@OrderDetailed",`Order# ${r.id} - ${r.status}`)},error:r=>console.log(r)})}}l.\u0275fac=function(r){return new(r||l)(t.Y36(p.gz),t.Y36(x.pm),t.Y36(i))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-order-detailed"]],decls:2,vars:1,consts:[[1,"container","mt-5"],["class","row",4,"ngIf"],[1,"row"],[1,"col-8"],[3,"items","isBasket","isOrder"],[1,"col-4"],[3,"shippingPrice","subtotal","total"]],template:function(r,e){1&r&&(t.TgZ(0,"div",0),t.YNc(1,A,5,6,"div",1),t.qZA()),2&r&&(t.xp6(1),t.Q6J("ngIf",e.order))},dependencies:[n.O5,T.S,U.b]});const b=[{path:"",component:c},{path:":id",component:l,data:{breadcrumb:{alias:"OrderDetailed"}}}];class d{}d.\u0275fac=function(r){return new(r||d)},d.\u0275mod=t.oAB({type:d}),d.\u0275inj=t.cJS({imports:[n.ez,p.Bz.forChild(b),p.Bz]});var y=s(4466);class a{}a.\u0275fac=function(r){return new(r||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[n.ez,y.m,d]})}}]);